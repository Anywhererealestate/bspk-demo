import{i as useId,e as reactExports,j as jsxRuntimeExports,M as Menu,q as ListItem,w as Checkbox}from"./index-B6c-xvyP.js";const DEFAULT={selectAll:"Select All"};function Listbox({itemDisplayCount,items=[],innerRef,onChange,activeIndex,selectedValues=[],disabled,id:idProp,listItemProps,isMulti,selectAll:selectAllProp,children,...props}){const menuId=useId(idProp),selectAll=reactExports.useMemo(()=>isMulti?selectAllProp&&typeof selectAllProp=="string"?selectAllProp:selectAllProp===!0?DEFAULT.selectAll:!1:!1,[isMulti,selectAllProp]),allSelected=reactExports.useMemo(()=>!!(items.length&&items.every(item=>selectedValues.includes(item.value))),[items,selectedValues]);return jsxRuntimeExports.jsxs(Menu,{...props,"aria-multiselectable":isMulti||void 0,"data-bspk":"listbox","data-disabled":disabled||void 0,"data-no-items":!items.length||void 0,id:menuId,innerRef,itemCount:items.length,itemDisplayCount,role:"listbox",children:[isMulti&&selectAll&&jsxRuntimeExports.jsx(ListItem,{"data-selected":allSelected||void 0,id:`${menuId}-select-all`,label:selectAll,onClick:event=>{onChange==null||onChange(allSelected?[]:items.map(item=>item.value),event)},role:"option",tabIndex:-1,trailing:jsxRuntimeExports.jsx(Checkbox,{"aria-label":selectAll,checked:!!allSelected,indeterminate:!allSelected&&selectedValues.length>0,name:"",onChange:checked=>{onChange==null||onChange(checked?items.map(item=>item.value):[])},value:""})},"select-all"),items.map((item,index)=>{var _a,_b;const selected=!!(Array.isArray(selectedValues)&&selectedValues.includes(item.value)),renderProps=listItemProps==null?void 0:listItemProps({selected,index,item});return reactExports.createElement(ListItem,{...item,...renderProps,active:activeIndex===index||void 0,"aria-disabled":item.disabled||void 0,"aria-posinset":index+1,"aria-selected":selected||void 0,as:"button",disabled:item.disabled||void 0,id:`${menuId}-item-${index}`,key:`${menuId}-item-${index}`,label:((_a=renderProps==null?void 0:renderProps.label)==null?void 0:_a.toString())||((_b=item.label)==null?void 0:_b.toString()),onClick:event=>{if(onChange){if(!isMulti){onChange==null||onChange([item.value],event);return}onChange(selected?selectedValues.filter(value=>value!==item.value):[...selectedValues,item.value],event)}},role:"option",tabIndex:-1,trailing:isMulti?jsxRuntimeExports.jsx(Checkbox,{"aria-label":item.label,checked:selected,name:item.value,onChange:checked=>{onChange==null||onChange(checked?selectedValues.filter(value=>value!==item.value):[...selectedValues,item.value])},value:item.value}):(renderProps==null?void 0:renderProps.trailing)||item.trailing||void 0})}),children]})}Listbox.bspkName="Listbox";export{Listbox};
